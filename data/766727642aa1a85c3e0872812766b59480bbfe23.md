# Test info

- Name: 1 GIVEN the sauce demo website WHEN a user attempts to checkout 2 items THEN checkout should be successful
- Location: /__w/spriteCloudAssessment/spriteCloudAssessment/tests/ui_tests.spec.ts:21:7

# Error details

```
Error: browserType.launch: Target page, context or browser has been closed
Browser logs:

╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ Firefox is unable to launch if the $HOME folder isn't owned by the current user.                                  ║
║ Workaround: Set the HOME=/root environment variable in your GitHub Actions workflow file when running Playwright. ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
Call log:
  - <launching> /ms-playwright/firefox-1482/firefox/firefox -no-remote -headless -profile /tmp/playwright_firefoxdev_profile-6N6uCz -juggler-pipe -silent
  - <launched> pid=539
  - [pid=539][err] Running Nightly as root in a regular user's session is not supported.  ($HOME is /github/home which is owned by pwuser.)
  - [pid=539] <process did exit: exitCode=1, signal=null>
  - [pid=539] starting temporary directories cleanup

```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { LandingPage } from '../page-objects/landing.page';
   3 | import { LoginPage } from '../page-objects/login.page';
   4 | import { CheckoutPage } from '../page-objects/checkout.page';
   5 | import { url, loginCredentials } from '../config/ui_test.data'
   6 |
   7 | test.beforeEach(async ({ page }) => {
   8 |   //Initialize pages
   9 |   const loginPage = new LoginPage(page);
  10 |
  11 |   //Navigate and Login to SauceDemo
  12 |   await loginPage.login(loginCredentials.firstName, loginCredentials.lastName);
  13 |   //Assert Login was successfull
  14 |   await expect(page).toHaveURL(`${url.base}${url.inventory}`);
  15 | });
  16 |
  17 | const shoppingItemLists = [
  18 |   { items: ['Sauce Labs Backpack', 'Sauce Labs Bike Light'] },
  19 | ];
  20 | for (const testCase of shoppingItemLists) {
> 21 |   test(`1 GIVEN the sauce demo website WHEN a user attempts to checkout ${testCase.items?.length} items THEN checkout should be successful`, async ({ page }) => {
     |       ^ Error: browserType.launch: Target page, context or browser has been closed
  22 |     //Initialize pages
  23 |     const landingPage = new LandingPage(page);
  24 |     const checkoutPage = new CheckoutPage(page);
  25 |
  26 |     //Create a list to store items added
  27 |     const itemsAddedToCart: { name: string, price: number }[] = [];
  28 |
  29 |     //Add the items to the cart, while adding their price to the list
  30 |     for (const itemName of testCase.items) {
  31 |       const price = await landingPage.addToCartByName(itemName);
  32 |       itemsAddedToCart.push({ name: itemName, price: price });
  33 |     }
  34 |     //Tally up the total
  35 |     const expectedTotalPrice = itemsAddedToCart.reduce((sum, item) => sum + item.price, 0);
  36 |
  37 |     //Complete checkout
  38 |     await checkoutPage.completeCheckoutWithPaymentCheck(expectedTotalPrice);
  39 |   });
  40 | }
  41 |
  42 | test(`2 GIVEN the landing screen WHEN the user filters by Z - A THEN the list should order correctly`, async ({ page }) => {
  43 |   //Initialize pages
  44 |   const landingPage = new LandingPage(page);
  45 |
  46 |   //Grab an initial list
  47 |   const productList = await landingPage.grabProductsList();
  48 |
  49 |   //Assert A-Z order first to control list
  50 |   await landingPage.sortProductsByOrderCode('az');
  51 |   expect(await landingPage.grabProductsList()).toEqual(productList.sort());
  52 |
  53 |   //Assert Z-A order
  54 |   await landingPage.sortProductsByOrderCode('za');
  55 |   expect(await landingPage.grabProductsList()).toEqual(productList.sort().reverse());
  56 | });
  57 |
  58 | test.describe('Negative Login Scenarios', () => {
  59 |   const loginErrorValidationList = [
  60 |     { description: 'a missing password', username: 'user1', password: '', expectedError: 'Password is required' },
  61 |     { description: 'a missing user', username: '', password: 'password2', expectedError: 'Username is required' },
  62 |     { description: 'incorrect user credentials', username: 'user1', password: 'password2', expectedError: 'Username and password do not match any user in this service' },
  63 |   ];
  64 |   for (const testCase of loginErrorValidationList) {
  65 |     test(`3. GIVEN the login screen WHEN a user submits ${testCase.description} THEN the error should show ${testCase.expectedError}`, async ({ page }) => {
  66 |       //Initialize pages
  67 |       const landingPage = new LandingPage(page);
  68 |       const loginPage = new LoginPage(page);
  69 |
  70 |       //Get back to the login page
  71 |       await landingPage.clickLogoutButton();
  72 |
  73 |       await loginPage.login(testCase.username, testCase.password);
  74 |
  75 |       await expect(await loginPage.getErrorText()).toContain(testCase.expectedError);
  76 |     });
  77 |   }
  78 | });
  79 |
```